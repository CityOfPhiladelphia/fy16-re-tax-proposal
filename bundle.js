!function(e){e.deparam=function(t,a){var p={},n={"true":!0,"false":!1,"null":null};return e.each(t.replace(/\+/g," ").split("&"),function(t,s){var o,r=s.split("="),l=decodeURIComponent(r[0]),i=p,c=0,d=l.split("]["),u=d.length-1;if(/\[/.test(d[0])&&/\]$/.test(d[u])?(d[u]=d[u].replace(/\]$/,""),d=d.shift().split("[").concat(d),u=d.length-1):u=0,2===r.length)if(o=decodeURIComponent(r[1]),a&&(o=o&&!isNaN(o)?+o:"undefined"===o?void 0:void 0!==n[o]?n[o]:o),u)for(;u>=c;c++)l=""===d[c]?i.length:d[c],i=i[l]=u>c?i[l]||(d[c+1]&&isNaN(d[c+1])?{}:[]):o;else e.isArray(p[l])?p[l].push(o):p[l]=void 0!==p[l]?[p[l],o]:o;else l&&(p[l]=a?void 0:"")}),p}}(jQuery);var app={};window.app=app,app.els={content:$("#content"),search:$("#property-search")},$("#templates").children().each(function(e,t){var a=$(t);app.els[a.data("hook")]=a}),app.views={search:function(e){app.els.search.val(e)},count:function(e){app.els.count.find("#total").text(e),app.els.count.appendTo(app.els.content)},result:function(e){var t=app.els.result.clone();console.log(e);var a=e.standardizedAddress;t.find("a").attr("href","?"+$.param({a:a})).text(a),t.appendTo(app.els.results)},results:function(e){app.els.content.text("Loading..."),$.ajax("https://api.phila.gov/ulrs/v3/addresses/"+e+"?format=json").done(function(e){app.els.content.empty(),app.views.count(e.addresses.length),app.els.results.empty(),e.addresses.forEach(app.views.result),app.els.results.appendTo(app.els.content)}).fail(function(){app.els.content.text("Failed to retrieve results. Please try another search.")})}},app.render=function(){var e=$.deparam(window.location.search.substr(1));e.q&&(app.els.content.children().detach(),app.views.search(e.q),app.views.results(e.q))},app.render(),window.onpopstate=app.render;